<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta name="description" content="ATA Email Signature Generator" />
    <link rel="apple-touch-icon" href="ATA_LOGO-B-RGB.png" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"
    />
    <link rel="manifest" href="manifest.json" />
    <title>Generador de firmas CICA</title>
    <link href="static/css/main.74a2e49e.chunk.css" rel="stylesheet" />

    <!-- ✅ html2canvas for image export -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>

    <!-- ✅ Botones de descarga -->
    <div style="text-align:center; margin-top: 20px;">
      <button id="btn-descargar-img">Descargar como imagen</button>
      <button id="btn-descargar-html">Descargar como HTML</button>
    </div>

    <!-- ✅ Script para descargar firma -->
    <script>
      // Cambia esto si tu firma tiene otro ID
      const CONTENEDOR_ID = "firma-container";

      document.getElementById("btn-descargar-img").addEventListener("click", () => {
        const firma = document.getElementById(CONTENEDOR_ID);
        if (!firma) return alert("No se encontró la firma. Verifica el ID.");
        html2canvas(firma).then((canvas) => {
          const link = document.createElement("a");
          link.download = "firma-cica.png";
          link.href = canvas.toDataURL("image/png");
          link.click();
        });
      });

      document.getElementById("btn-descargar-html").addEventListener("click", () => {
        const firma = document.getElementById(CONTENEDOR_ID);
        if (!firma) return alert("No se encontró la firma. Verifica el ID.");
        const styles = Array.from(document.styleSheets)
          .map((sheet) => {
            try {
              return Array.from(sheet.cssRules)
                .map((rule) => rule.cssText)
                .join("");
            } catch (e) {
              return "";
            }
          })
          .join("");

        const fullHtml = `
          <html>
          <head>
            <meta charset="utf-8">
            <style>${styles}</style>
          </head>
          <body>${firma.outerHTML}</body>
          </html>`;

        const blob = new Blob([fullHtml], { type: "text/html" });
        const link = document.createElement("a");
        link.download = "firma-cica.html";
        link.href = URL.createObjectURL(blob);
        link.click();
      });
    </script>

    <!-- Scripts de React -->
    <script src="static/js/2.86075dae.chunk.js"></script>
    <script src="static/js/main.b9d8c986.chunk.js"></script>
  </body>
</html>
